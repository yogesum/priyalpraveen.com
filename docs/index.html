<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="wedding in Jaipur on December 11, 2017.">
  <meta name="author" content="Praveen Somani and Priyal Maheshwari">

  <title>Praveen and Priyal Wedding</title>

  <!-- Bootstrap Core CSS -->
  <link rel="icon" href="/images/favicon.gif" type="image/x-icon">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="./css/landing-page.css?v5" rel="stylesheet">

  <!-- Custom Fonts -->
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href="./css/goog-font.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
  <style type="text/css">
  #clockdiv {
    font-family: sans-serif;
    color: #df272b;
    display: inline-block;
    font-weight: 100;
    text-align: center;
    font-size: 30px;
  }

  #clockdiv > div {
    padding: 10px;
    border-radius: 3px;
    background: rgba(236, 236, 236, 0.40);
    display: inline-block;
  }

  #clockdiv div > span {
    padding: 15px;
    width: 72px;
    border-radius: 93px;
    background: rgba(236, 236, 236, 0.8);
    display: inline-block;
  }

  .smalltext {
    padding-top: 5px;
    font-size: 16px;
  }
  </style>
</head>

<body>
<section id="home">
  <!-- Header -->
  <div class="intro-header">

  <div class="col-lg-12">
    <div id="bg-attach"></div>
    <div class="intro-message">
      <h1>Praveen <i class="fa fa-heart-o fa-spin auto-xs" aria-hidden="true"></i> Priyal</h1>
      <h3>Jaipur, Rajasthan   <i class="fa fa-globe auto-xs" aria-hidden="true"></i>   December 11, 2017</h3>
      <hr class="intro-divider">
      <ul class="list-inline intro-social-buttons hide">
        <li>
          <a href="#rsvp" class="btn btn-default btn-lg"><i class="fa fa-envelope-open-o fa-fw"></i> <span class="network-name">RSVP</span></a>
        </li>
      </ul>
    </div>
   </div>

  </div>
  <!-- /.intro-header -->

</section>
<section class="bg-white">
<div class="col-xs-12">
  <div class="center-block text-center" style="padding-bottom: 2rem;">
  <h2 style="color: #df272b">Fun begins in ...</h2>
  <div id="clockdiv">
    <div>
      <span class="days"></span>
      <div class="smalltext">Days</div>
    </div>
    <div>
      <span class="hours"></span>
      <div class="smalltext">Hours</div>
    </div>
    <div>
      <span class="minutes"></span>
      <div class="smalltext">Minutes</div>
    </div>
    <div>
      <span class="seconds"></span>
      <div class="smalltext">Seconds</div>
    </div>
  </div>
  </div>
  <div class="text-center">
      <img src="./images/love-birds.png">
  </div>
</div>
</section>
<section id="schedule" class="bg-white">
  <div class="center-block text-center" style="padding: 1rem .8rem;">
    <div class="clearfix"></div>
    <h1 class="section-heading">When and Where</h1>
    <div class="lead">
      <div class="hidden-xs hidden-sm col-sm-3 col-md-3 col-lg-3">
          <img src="images/tree.png" style="position: absolute;top: -275px;left: 0;width: 420px;">
      </div>
      <div class="col-xs-12 col-sm-12 col-md-6" style="background: #fff;">
          <h3>Sunday, December 10, 2017</h3>
            <div>Ring Ceremony - 6:15 PM</div><div>Sangeet Sandhya - 7:15 PM<p><h3>at</h3></p><p><em><a href="https://goo.gl/maps/7xoC3BGY6RH2" target="_blank">Maheshwari Bhawan</a>, Kishangarh&nbsp;Renwal, Jaipur</em></p></div>
          <p><br></p>

          <h3>Monday, December 11, 2017<br></h3>
            <div>Reception - 8:15 PM<p><h3>at</h3></p><p><em><a href="https://goo.gl/maps/xrj94crjEeS2" target="_blank">Lions Paradise</a>, Jaipur</em></p></div>
      </div>
      <div class="hidden-xs hidden-sm col-sm-3 col-md-3 col-lg-3" style="position: relative;">
          <img src="images/bird-cage.png" style="position: absolute;right: 0;top: 178px;width: 201px;">
      </div>
    </div>
    <div class="col-xs-12" style="background: #fff;">
        <button type="button" id="cardDownload" class="btn btn-default" data-container="body" data-toggle="popover" data-trigger="click" data-html="true" data-placement="top" data-content="
            <div style='padding: 3px 2px;font-size: 19px;'><a href='https://drive.google.com/uc?export=download&id=1a70KsQQYVn6osBJ-Fs1Ohq8a0L9udPqk'><img width='30' src='./images/praveen30.png'><span style='margin-left: 5px;'>Praveen and Family</span></a></div>
            <div class='text-center' style='height: 2px;background: #eee'><div style='color: red;font-size: 1.5em;position: absolute;top: 34px;left: 48%;'>&#x2665;</div></div>
            <div style='padding: 3px 2px;text-align:right;width: 245px;font-size: 19px;'><a href='https://drive.google.com/uc?export=download&id=18ESYS84efCgvjWbA3wfqpZrebhqbLGLk'><span style='margin-right: 15px;'>Priyal and Family</span><img width='30' src='./images/priyal30.png'></a></div>
        ">
          Download Card
        </button>
        <button type="button" class="btn btn-default">
          RSVP
        </button>
    </div>
      <hr/>
      <div class="container-fluid" style="margin-top: 5%;">
          <div class="row" style="border-top: 1px solid #eee;padding: 1%;">
              <div class="text-center col-xs-12 m-t-xs" style="margin-bottom: 20px;">
                  <h3>Say something about the couple</h3>
              </div>
              <div class="col-xs-12 m-t-xs m-b-xs">
                  <div class="tcb-simple-carousel">
                      <div id="myCarousel" class="carousel slide" data-interval="3000">
                          <!-- Indicators -->
                          <div class="carousel-inner" id="comments">

                          </div>
                          <div class="carousel-controls">
                              <a class="carousel-control left" href="#myCarousel" data-slide="prev"><span class="fa fa-angle-double-left"></span></a>
                              <a class="carousel-control right" href="#myCarousel" data-slide="next"><span class="fa fa-angle-double-right"></span></a>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="col-md-offset-4 col-md-4 m-t-xs m-b-xs">
                  <form name="commentForm">
                      <div class="col-xs-12 m-t-xs m-b-xs text-left">
                          <label style="padding: 10px 0 5px 0;">Your Full name</label>
                          <input class="form-control" type="text" id="name" placeholder="Full Name">
                      </div>
                      <div class="col-xs-12 m-t-xs m-b-xs text-left">
                          <label style="padding: 10px 0 5px 0">Something about the couple</label>
                          <textarea maxlength="160" class="form-control" id="comment" rows="3" style="resize: none" placeholder="Something about the couple"></textarea>
                      </div>
                      <div class="col-xs-12 radio text-left" style="margin: 10px 5px;">
                          <div style="padding: 10px 0 5px 0;">Which Side do you belong to?</div>
                          <label><input type="radio" name="side" value="Ladke Wale"> Ladke Wale</label>
                          <label><input type="radio" name="side" value="Ladki Wale"> Ladki Wale</label>
                      </div>
                      <div class="col-xs-12 m-t-xs m-b-xs">
                          <button class="btn btn-default pull-left" type="button" style="color: #fff;background:#7dd0a2;" onClick="postcomment()">COMMENT</button>
                          <div id="error" class="text-left col-xs-12"  style="padding: 10px 0;"></div>
                      </div>
                  </form>
              </div>
          </div>
      </div>
  </div>
  <div class="col-lg-5 col-lg-offset-2 col-sm-6">
  </div>
</section>
<section id="contact" class='hide bg-white'>
  <div class="col-lg-6">
    <h2>Keep in Touch:</h2>
  </div>
  <div class="col-lg-6">
    <ul class="list-inline banner-social-buttons">
      <li>
        <a href="#rsvp" class="btn btn-default btn-lg">
          <i class="fa fa-envelope-open-o fa-fw"></i>
          <span class="network-name">RSVP</span></a>
      </li>
    </ul>
  </div>
</section>

<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-md-8">
        <ul class="list-inline">
          <li><a href="#home">Home</a></li>
          <li class="footer-menu-divider">⋅</li>
          <li><a href="#about">About</a></li>
          <li class="footer-menu-divider">⋅</li>
          <li>
              <a href="#contact">Contact</a>
          </li>
        </ul>
        <p class="copyright text-muted small">Copyright © 2017 Priyal and Praveen. All Rights Reserved.</p>
      </div>
    </div>
  </div>
</footer>

<!-- time remaining clock -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
<script type="text/javascript">
    function getTimeRemaining(endtime) {
      var t = endtime - new Date();
      var seconds = Math.floor((t / 1000) % 60);
      var minutes = Math.floor((t / 1000 / 60) % 60);
      var hours = Math.floor((t / (1000 * 60 * 60)) % 24);
      var days = Math.floor(t / (1000 * 60 * 60 * 24));
      return {
        'total': t,
        'days': days,
        'hours': hours,
        'minutes': minutes,
        'seconds': seconds
      };
    }

    function initializeClock(id, endtime) {
      var clock = document.getElementById(id);
      var daysSpan = clock.querySelector('.days');
      var hoursSpan = clock.querySelector('.hours');
      var minutesSpan = clock.querySelector('.minutes');
      var secondsSpan = clock.querySelector('.seconds');

      function updateClock() {
        var t = getTimeRemaining(endtime);

        daysSpan.innerHTML = t.days;
        hoursSpan.innerHTML = ('0' + t.hours).slice(-2);
        minutesSpan.innerHTML = ('0' + t.minutes).slice(-2);
        secondsSpan.innerHTML = ('0' + t.seconds).slice(-2);

        if (t.total <= 0) {
          clearInterval(timeinterval);
        }
      }

      updateClock();
      var timeinterval = setInterval(updateClock, 1000);
    }

    var deadline = new Date(2017, 11, 12, 4, 0, 0);
    initializeClock('clockdiv', deadline);
    $(document).ready(function(){
        $('[data-toggle="popover"]').popover();
    });

    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyBxUy0ciqWkTBPNhTynV5TwMXiIIslGWcQ",
        authDomain: "test-a74b8.firebaseapp.com",
        databaseURL: "https://test-a74b8.firebaseio.com",
        projectId: "test-a74b8",
        storageBucket: "test-a74b8.appspot.com",
        messagingSenderId: "827877571148"
    };
    firebase.initializeApp(config);
    var db = firebase.database();
    var count = 1;
    var comments = {};
    (function() {
        var starCountRef = db.ref('comments');
        starCountRef.on('value', function(snapshot) {
            comments = snapshot.val();
            count = snapshot.numChildren();
            showComments(comments, count);
        });
    })();
    function postcomment() {
        var name = $('#name').val();
        var comment = $('#comment').val();
        if (!name || !comment) {
            $('#error').html('<div class="text-danger" style="">Name and Comment are mandatory</div>');
            return setTimeout(function() { $('#error').html('') }, 5000);
        }
        var side = $("input[name='side']:checked").val() || '';
        $('#name').val('');
        $('#comment').val('');
        $("input[name='side']").prop('checked', false);
        db.ref('comments/comment' + count).set({
            name: name,
            comment: comment,
            likes: 0,
            side: side,
            isApproved: false
        }).then(function() {
            $('#error').html('<div class="text-success">Your comment is posted and waiting for approval</div>');
            setTimeout(function() { $('#error').html('') }, 5000);
        }).catch(function() {
            $('#error').html('<div class="text-danger">Error Occurred</div>');
            setTimeout(function() { $('#error').html('') }, 5000);
        });
    }

    function showComments(comments, len) {
       var keys = Object.keys(comments);
        var html = '';
       for(var i=0;i < len;i++) {
           var com = comments[keys[i]];
            if(!com.isApproved) continue;
            html += [
               '<div class="item">',
               '<blockquote>',
               '<p> ' + com.comment + '</p>',
               '<small><cite>' + com.name + '</cite> ('+ com.side +')</small>',
               '</blockquote>',
               '</div>'
           ].join(' ');
       }
       $("#comments").html(html);
       $('.item').first().addClass('active');
       $('#myCarousel').carousel();
    }
</script>
</body>
</html>
